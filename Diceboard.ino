int buttonD20 = 4;
int buttonD12 = 6;
int buttonD10 = 7;
int buttonD8 = 8;
int buttonD6 = 15;
int buttonD4 = 14;
int buttonD100 = 16;
int button = 10;
#include"Keyboard.h"
#include <SPI.h>
#include <Wire.h>
#include <Adafruit_GFX.h>
#include <Adafruit_SSD1306.h>

#define OLED_WIDTH 128 // OLED display width, in pixels
#define OLED_HEIGHT 64 // OLED display height, in pixels

#define OLED_ADDR 0x3C
Adafruit_SSD1306 display(OLED_WIDTH, OLED_HEIGHT);


//d20 bitmap for splash screen
const unsigned char myBitmap [] PROGMEM = {
// 'd20, 80x50px
  0x00, 0x00, 0x00, 0x00, 0x01, 0x80, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x05, 0xa0, 
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xc0, 0x83, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
  0x00, 0x07, 0x00, 0x80, 0x60, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x18, 0x00, 0x80, 0x18, 0x00, 
  0x00, 0x00, 0x00, 0x00, 0x00, 0x66, 0x00, 0x80, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x0c, 0x50, 
  0x00, 0x80, 0x18, 0x10, 0x00, 0x00, 0x00, 0x00, 0x60, 0xb8, 0x00, 0x00, 0x0c, 0x06, 0x00, 0x00, 
  0x00, 0x01, 0x00, 0xe8, 0x00, 0x00, 0x0a, 0x00, 0x80, 0x00, 0x00, 0x20, 0x00, 0x90, 0x00, 0x00, 
  0x07, 0x80, 0x04, 0x00, 0x01, 0x80, 0x02, 0xe0, 0x00, 0x00, 0x00, 0x80, 0x01, 0x80, 0x0c, 0x00, 
  0x00, 0x00, 0x00, 0x40, 0x00, 0x00, 0x00, 0x30, 0x70, 0x00, 0x00, 0x00, 0x01, 0xc0, 0x00, 0x00, 
  0x00, 0x0e, 0x60, 0x00, 0x00, 0x00, 0x01, 0xc0, 0x00, 0x00, 0x00, 0x06, 0x50, 0x00, 0x00, 0x00, 
  0x02, 0x60, 0x00, 0x00, 0x00, 0x0e, 0x48, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x1a, 
  0x44, 0x00, 0x20, 0x00, 0x08, 0x00, 0x00, 0x00, 0x00, 0x32, 0x42, 0x00, 0x98, 0x00, 0x20, 0x04, 
  0x00, 0x10, 0x00, 0x62, 0x43, 0x00, 0x0a, 0x00, 0x60, 0x02, 0x00, 0x60, 0x00, 0x42, 0x40, 0x80, 
  0x0c, 0x00, 0xc0, 0x01, 0x01, 0x80, 0x00, 0x02, 0x40, 0x40, 0x00, 0x01, 0x80, 0x00, 0x80, 0x1f, 
  0x82, 0x02, 0x40, 0x20, 0x00, 0x02, 0x00, 0x00, 0x40, 0x1e, 0x04, 0x02, 0x40, 0x10, 0x00, 0x04, 
  0x00, 0x00, 0x20, 0x1c, 0x08, 0x02, 0x40, 0x00, 0x00, 0x08, 0x03, 0x48, 0x10, 0x00, 0x10, 0x02, 
  0x54, 0x04, 0x00, 0x10, 0x02, 0x04, 0x08, 0x00, 0x20, 0xb2, 0x4c, 0x02, 0x00, 0x20, 0x04, 0x4c, 
  0x04, 0x00, 0x40, 0x92, 0x4a, 0x01, 0x00, 0x40, 0x1e, 0x30, 0x00, 0x00, 0x81, 0x12, 0x4c, 0x00, 
  0xc0, 0x80, 0x00, 0x00, 0x00, 0x01, 0x01, 0x22, 0x4d, 0x00, 0x41, 0x00, 0x00, 0x00, 0x00, 0x82, 
  0x01, 0x22, 0x42, 0x80, 0x26, 0x00, 0x00, 0x00, 0x00, 0x64, 0x02, 0x42, 0x42, 0x00, 0x1c, 0x00, 
  0x00, 0x00, 0x00, 0x38, 0x00, 0xc2, 0x40, 0x00, 0x2c, 0x00, 0x00, 0x00, 0x00, 0x34, 0x00, 0x02, 
  0x40, 0x01, 0x84, 0x00, 0x00, 0x00, 0x00, 0x21, 0x80, 0x02, 0x40, 0x04, 0x01, 0x00, 0x00, 0x00, 
  0x00, 0xc0, 0x20, 0x02, 0x40, 0xc0, 0x01, 0x80, 0x00, 0x00, 0x01, 0x80, 0x01, 0x02, 0x42, 0x00, 
  0x00, 0xc0, 0x00, 0x00, 0x03, 0x06, 0x00, 0x62, 0x58, 0x00, 0x00, 0x60, 0x00, 0x00, 0x06, 0x0c, 
  0x00, 0x1a, 0x60, 0x00, 0x20, 0x10, 0x01, 0xe0, 0x08, 0x11, 0xe0, 0x06, 0x04, 0x00, 0x6e, 0x08, 
  0x01, 0xe0, 0x10, 0x64, 0x40, 0x30, 0x01, 0x80, 0x31, 0x04, 0x00, 0x20, 0x20, 0x89, 0x81, 0x80, 
  0x00, 0x30, 0x11, 0x02, 0x01, 0xe0, 0x40, 0x1a, 0x04, 0x00, 0x00, 0x01, 0x00, 0x01, 0x00, 0x00, 
  0x80, 0x00, 0x80, 0x00, 0x00, 0x00, 0x60, 0x00, 0x80, 0x01, 0x00, 0x06, 0x00, 0x00, 0x00, 0x00, 
  0x0c, 0x00, 0x40, 0x02, 0x00, 0x18, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x20, 0x04, 0x00, 0x00, 
  0x00, 0x00, 0x00, 0x00, 0x00, 0x18, 0x18, 0x08, 0x18, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x07, 
  0x0c, 0x10, 0x60, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xc6, 0x23, 0x00, 0x00, 0x00, 0x00, 
  0x00, 0x00, 0x00, 0x00, 0x07, 0x60, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x01, 0x80, 
  0x00, 0x00, 0x00, 0x00
};


static int total = 0;

void setTotal(int);
void die(int);

void die(int sides)


{
  display.clearDisplay();
  
int x = 46;
int y = 0;


display.setTextSize(2);
display.setTextColor(WHITE);
if(sides < 10)
{
  x = 53;
}
display.setCursor(x,y);
display.println("D"); 
x += 12;
display.setCursor(x,y);
display.println(sides);

display.display();

  y = 17;
  x-= 13;
  int roll = random(1,(sides+1));
  display.setTextSize(5);
  display.setTextColor(WHITE);
  x = 38;
  display.setCursor(x,y);
  if(roll < 10)
  {
    x+=15;
  }
  display.setCursor(x,y);
  display.println(roll);
  

  display.display();
  setTotal(roll);
  delay(80);
  
}

//total functions

void setTotal(int roll)
{
  total +=roll;
}
void printTotal()
{

  display.clearDisplay();
  
int x = 36;
int y = 0;

// header

display.setTextSize(2);
display.setTextColor(WHITE);
display.setCursor(x,y);
display.println("Total"); 


display.display();

  y = 17; 
  display.setTextSize(5);
  if(total < 10)
  {
    x += 14;
  }
  x-= 0;
  if(total > 100)
  {
    display.setTextSize(4);
  }

  if(total > 999)
  {
    display.setTextSize(3);
  }
  
  if(total > 9999)
  {
    display.setTextSize(2);
  }
  display.setTextColor(WHITE);
  display.setCursor(x,y);
  display.setCursor(x,y);
  display.println(total);

  display.display();
  delay(40);
  delay(1600); // keeps total from clearing temporarily
  total = 0;
  display.display();
 
}


void setup(){
  
  Serial.begin(9600);
  randomSeed(analogRead(0));

display.begin(SSD1306_SWITCHCAPVCC, OLED_ADDR);
display.clearDisplay();

display.setTextSize(2);
display.setTextColor(WHITE);
display.setCursor(10,0);
display.println("DiceBoard");
display.display();
delay(20);
display.drawBitmap(24,17, myBitmap, 80, 50, WHITE);
display.display();

// button inputs
  pinMode(buttonD20, INPUT);
  digitalWrite(buttonD20,HIGH);
  
  pinMode(buttonD12, INPUT);
  digitalWrite(buttonD12,HIGH);

  pinMode(buttonD10, INPUT);
  digitalWrite(buttonD10,HIGH);

  pinMode(buttonD8, INPUT);
  digitalWrite(buttonD8,HIGH);

  pinMode(buttonD6, INPUT);
  digitalWrite(buttonD6,HIGH);

  pinMode(buttonD4, INPUT);
  digitalWrite(buttonD4,HIGH);

  pinMode(buttonD100, INPUT);
  digitalWrite(buttonD100,HIGH);

  pinMode(button, INPUT);
  digitalWrite(button,HIGH);

  
Serial.begin(9600);
}

void loop(){



  if(digitalRead(buttonD20) == 0)
  {
    die(20);
  }

  if(digitalRead(buttonD12) == 0)
  {
    die(12);
  }

  if(digitalRead(buttonD10) == 0)
  {
    die(10);
  }

  if(digitalRead(buttonD8) == 0)
  {
    die(8);
  }

  if(digitalRead(buttonD6) == 0)
  {
    die(6);
  }

  if(digitalRead(buttonD4) == 0)
  {
    die(4);
  }

  if(digitalRead(buttonD100) == 0)
  {
    die(100);
  }

  if(digitalRead(button) == 0)
  {
    display.clearDisplay();
    printTotal();
    delay(200);
  }
}
